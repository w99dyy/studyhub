<div class="mt-7 px-3">

  <div class="recent-posts grid grid-cols-1 max-w-full md:max-w-6xl mx-auto ">
  <h1 class="text-4xl font-bold text-white mb-4">Recent Posts</h1>

  <!-- Posts List -->
  <div class="posts-container">
    <% if @posts.any? %>
      <% @recent_posts.each do |post| %>
        <div class="post-card bg-gray-800 rounded-lg p-6 mb-6 border border-gray-700">
          <!-- Post Title -->
          
          <h2 class="text-2xl font-bold text-white mb-3">
            <%= link_to truncate(post.title, length: 150), post, class: "hover:text-cyan-400 transition" %>
          </h2>

          <!-- Three dots -->
          <% if current_user && current_user == post.user %>
            <div class="relative inline-block bottom-10 float-right">
            <button class="peer hover:bg-gray-700 rounded-full outline-none">
          <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-three-dots " viewBox="0 0 16 16">
            <path d="M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3m5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3m5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3"/>
          </svg>
          </button>
          
          <div class="absolute text-sm right-0 mt-2 opacity-0 invisible peer-focus:opacity-100 peer-focus:visible transition-all duration-200 bg-gray-800 rounded-lg shadow-[0_20px_40px_-1px_rgba(0,0,0,0.3)] w-48 z-10">
          <%= link_to "Edit Post", edit_post_path(post), class: "block px-4 py-3 hover:bg-gray-700 border-b border-gray-700" if post&.id.present? %>
            <%= button_to "Delete Post", post_path(post),
            data: { confirm: "Are you sure you want to delete this post?" },
            class: "block w-full text-left px-4 py-3 hover:bg-gray-700",
             method: :delete if post&.id.present? %>
          </div>
            
          </div>
          
          <% end %>

          <!-- Post Content Preview -->
          
          <div class="post-content mb-4">
            <p class="text-gray-300 leading-relaxed">
              <%= truncate(post.content.to_plain_text, length: 200) %>
            </p>
          </div>
          
          <!-- Tags -->
          
          <% if post.tags.any? %>
            <div class="tags mb-4">
              <div class="flex flex-wrap gap-2">
                <% post.tags.each do |tag| %>
                 <%= link_to tag.name, posts_path(tag: tag.name),
              class: "bg-blue-700 text-white px-3 py-1 rounded-full text-sm hover:bg-blue-600" %>

                <% end %>
              </div>
            </div>
          <% end %>
          
          <!-- Post Metadata -->
          
          <div class="flex justify-between text-sm text-gray-400 ">
            <div>
              <span class="mr-4">
              <span> By <%= post.user.username %> ‚Ä¢ </span>
              üìÖ Posted <%= time_ago_in_words(post.updated_at) %> ago</span>
              <% if post.updated_at.present? && post.updated_at > post.created_at + 1.minute %>
                <span>‚úèÔ∏è Edited <%= time_ago_in_words(post.updated_at) %> ago</span>
              <% end %>
            </div>
            <div class="flex justify-end">

            <%= link_to "Read More ‚Üí", post, class: "text-cyan-400 hover:text-cyan-300 font-semibold" %>
          </div>
          </div>
        </div>
      <% end %>
    <% else %>
    
      <!-- Empty State -->

      <div class="empty-state text-center py-16 bg-gray-800 rounded-lg">
        <div class="text-6xl mb-4">üìù</div>
        <h3 class="text-2xl font-bold text-white mb-2">No posts yet</h3>
        <p class="text-gray-400 mb-6">Be the first to share your knowledge!</p>
        <%= link_to "Create First Post", new_post_path, 
            class: "bg-blue-700 hover:bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold transition" %>
      </div>
    <% end %>
  </div>
</div>